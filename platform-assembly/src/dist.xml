<assembly
    xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.0 http://maven.apache.org/xsd/assembly-1.1.0.xsd">
    
    <id>dist</id>
    <formats>
        <format>tar.gz</format>
    </formats>
    <includeBaseDirectory>true</includeBaseDirectory>
    <fileSets>
    	<fileSet>
    		<directory>src/main/resources</directory>
    		<outputDirectory></outputDirectory>
   			<includes>
   				<include>local.properties</include>
   				<include>bin/createDatabase.xml</include>
   			</includes>
    		<fileMode>0777</fileMode>
    		<directoryMode>0777</directoryMode>
    	</fileSet>
    	<fileSet>
    		<directory>src/main/resources</directory>
    		<outputDirectory></outputDirectory>
   			<includes>
   				<include>docs/*.*</include>
   			</includes>
    		<fileMode>0777</fileMode>
    		<directoryMode>0777</directoryMode>
    	</fileSet>
	    <fileSet>
    		<directory>src/main/resources</directory>
	    	<outputDirectory>resources</outputDirectory>
	    	<includes>
	    		<include>c3p0.properties</include>
	    		<include>log4j.xml</include>
	    		<include>persistence/**</include>
	    		<include>properties/**</include>
	    	</includes>	
    		<excludes>
   	            <exclude>site/**</exclude>
   				<exclude>*.sh</exclude>
   				<exclude>bin/**</exclude>
   				<exclude>docs/**</exclude>
   				<exclude>help/**</exclude>
   				<exclude>local.properties</exclude>
   				<exclude>**/version.properties</exclude>
    			<exclude>META-INF/**</exclude>
    			<exclude>**/createTables.txt</exclude>
    			<!-- Omit all adapters or plugins. They will be copied using dependencies. -->
				<exclude>resources/adapters/**</exclude>
				<exclude>resources/plugins/**</exclude>
				<exclude>resources/base/**</exclude>
				<exclude>resources/osgi/**</exclude>
    		</excludes>
    		<fileMode>0777</fileMode>
	    </fileSet>
	    <fileSet>
	    	<directory>${project.build.directory}</directory>
	    	<outputDirectory>resources/properties</outputDirectory>
	    	<includes>
	    		<include>version.properties</include>
	    	</includes>
	    </fileSet>
	</fileSets>
	
	<files>
	   	<file>
	   		<source>src/main/resources/persistence/createTables.txt</source>
	   		<outputDirectory>resources/persistence</outputDirectory>
	   		<filtered>true</filtered>
	   	</file>
	</files>

    <dependencySets>
        <dependencySet>
    		<outputDirectory>.</outputDirectory>
    		<useProjectArtifact>true</useProjectArtifact>
    		<includes>
				<include>gov.nasa.arc.mct:startup</include>
    		</includes>
    		<useTransitiveDependencies>false</useTransitiveDependencies>
    		<useTransitiveFiltering>false</useTransitiveFiltering>
    		<fileMode>0777</fileMode>
    	</dependencySet>
    	<dependencySet>
    		<outputDirectory>lib</outputDirectory>
    		<useProjectArtifact>true</useProjectArtifact>
    		<includes>
				<include>org.apache.felix:org.apache.felix.framework</include>
				<include>gov.nasa.arc.mct:startup</include>
    		</includes>
    		<excludes>
    			<!-- Exclude the OSGi bundles and their libraries. -->
    			<exclude>log4j:log4j</exclude>
    		</excludes>
    		<useTransitiveDependencies>true</useTransitiveDependencies>
    		<useTransitiveFiltering>true</useTransitiveFiltering>
    		<fileMode>0777</fileMode>
    	</dependencySet>
    	<dependencySet>
    		<outputDirectory>ext</outputDirectory>
    		<useProjectArtifact>false</useProjectArtifact>
    		<includes>
				<include>log4j:log4j</include>
    		</includes>
    		<useTransitiveDependencies>true</useTransitiveDependencies>
    		<useTransitiveFiltering>true</useTransitiveFiltering>
    		<fileMode>0777</fileMode>
    	</dependencySet>
    	
    	<!-- Add the system export definitions -->
    	<dependencySet>
    		<outputDirectory>resources/osgi</outputDirectory>
    		<useProjectArtifact>false</useProjectArtifact>
    		<includes>
    			<include>org.apache.felix:org.apache.felix.scr</include>
    			<include>org.apache.felix:org.apache.felix.configadmin</include>
    			<include>org.apache.felix:org.apache.felix.log</include>
    			<include>org.apache.felix:org.osgi.compendium</include>
    		</includes>
    		<useTransitiveDependencies>false</useTransitiveDependencies>
    		<fileMode>0777</fileMode>
    	</dependencySet>
    	<dependencySet>
    		<outputDirectory>resources/platform</outputDirectory>
    		<useProjectArtifact>false</useProjectArtifact>
    		<includes>
    			<include>gov.nasa.arc.mct:mctcore</include>
				<include>gov.nasa.arc.mct:platform</include>
				<include>gov.nasa.arc.mct:util</include>
    			<include>gov.nasa.arc.mct:serviceConfigurator</include>
    			<include>gov.nasa.arc.mct:databasePersistence</include>
    			<include>gov.nasa.arc.mct:mctCoreTaxonomyProvider</include>
    		    <include>gov.nasa.arc.mct.collection:collectionComponent</include>
    			<include>gov.nasa.arc.mct:subscriptionManager</include>
    		    <include>gov.nasa.arc.mct:timeSequenceFeedAggregator</include>
    			<include>gov.nasa.arc.mct:sleepycat</include>  		
    		</includes>
    		<useTransitiveDependencies>false</useTransitiveDependencies>
    		<fileMode>0777</fileMode>
    	</dependencySet>
        <dependencySet>
    		<outputDirectory>resources/plugins</outputDirectory>
    		<useProjectArtifact>false</useProjectArtifact>
    		<includes>
    			<include>gov.nasa.arc.mct:canvasView</include>
    			<include>gov.nasa.arc.mct:evaluatorComponent</include>
    			<include>gov.nasa.arc.mct:tableViews</include>
    			<include>gov.nasa.arc.mct:batikWrapper</include>
    			<include>gov.nasa.arc.mct:graphicalViews</include>
    			<include>gov.nasa.jsc.mct:executableButtons</include>
    			<include>gov.nasa.arc.mct:limits</include> 			
    			<include>plotter:plotter</include>
    			<include>gov.nasa.arc.mct:fastPlotViews</include>
			<include>org.acme.example:multiColumnTables</include>
    			<include>gov.nasa.arc.mct:importExportProvider</include>
    			<include>org.acme.example:exampleplugin</include>
    		</includes>
    		<useTransitiveDependencies>false</useTransitiveDependencies>
    		<fileMode>0777</fileMode>
    	</dependencySet>
       
       <!-- Includes Apache ANT version 1.7.1 as part of approved FOSS process -->
    	<dependencySet>
    		<outputDirectory>ant-libs</outputDirectory>
    		<useProjectArtifact>false</useProjectArtifact>
    		<includes>
    			<include>org.apache.ant:ant</include>
    		</includes>
    		<useTransitiveDependencies>true</useTransitiveDependencies>
    		<useTransitiveFiltering>true</useTransitiveFiltering>
    		<fileMode>0777</fileMode>
    	</dependencySet>
    </dependencySets>
</assembly>
